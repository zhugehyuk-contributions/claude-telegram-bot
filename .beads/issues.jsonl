{"id":"agi-077","title":"Rename bd prefix to 9yr","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T00:21:19.656433209+09:00","created_by":"Z","updated_at":"2026-02-02T01:03:29.873565616+09:00","closed_at":"2026-02-02T01:03:29.873565616+09:00","close_reason":"Closed"}
{"id":"agi-14p","title":"make up fails when service not installed - need fallback for dev mode","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T00:31:00.298338736+09:00","created_by":"Z","updated_at":"2026-02-02T01:03:23.063988473+09:00","closed_at":"2026-02-02T00:35:05.846589507+09:00","close_reason":"Closed"}
{"id":"agi-30z","title":"Fix: handleRetry missing ctx.message undefined check","description":"Missing undefined check in handleRetry command\n\nLocation: src/handlers/commands.ts:467-506\n\nIssue: Creates fake context by spreading ctx.message which could be undefined in edge cases\n\nImpact: Potential crash when ctx.message is undefined\n\nFix: Add guard check before spreading ctx.message","status":"open","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:48:14.256348813+09:00","created_by":"Z","updated_at":"2026-02-02T01:48:23.584412073+09:00"}
{"id":"agi-5eb","title":"fix: spinner recreates itself on timer (infinite delete/create)","description":"Bug: Timer interval recreates spinner every second instead of editing\n\nCurrent broken logic:\n- Timer calls recreateProgressMessage() every 1s\n- recreateProgressMessage = DELETE + CREATE new message\n- Result: Spinner constantly deleted/recreated (flashing)\n\nCorrect logic should be:\n- Timer: EDIT existing message (update text only)\n- New output added: DELETE + CREATE (move to bottom)\n\nFix:\n1. Timer should use editMessageText (not delete/create)\n2. Only recreate when new messages are added\n3. Recreate = delete old + create new at bottom","status":"closed","priority":1,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:26:56.019383359+09:00","created_by":"Z","updated_at":"2026-02-02T01:28:35.979823832+09:00","closed_at":"2026-02-02T01:28:35.979823832+09:00","close_reason":"Closed"}
{"id":"agi-5kf","title":"Fix: recreateProgressMessage uncaught promise in initialization","description":"Uncaught promise during progress message initialization\n\nLocation: src/handlers/streaming.ts:154-155\n\nIssue: recreateProgressMessage() called without await, fire-and-forget. Errors may not propagate.\n\nImpact: Silent failures during initialization\n\nFix: Add await or explicit error handling, or document intentional fire-and-forget","status":"open","priority":3,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:48:29.59035452+09:00","created_by":"Z","updated_at":"2026-02-02T01:48:37.322737945+09:00"}
{"id":"agi-a1s","title":"Integrate multi-provider usage into /stats command","description":"Update handleStats in src/handlers/commands.ts to display Claude, Codex, and Gemini usage.\n\n## Display Format\n\n```\nğŸ“Š Session Statistics\n\n... (existing session stats) ...\n\nğŸŒ Provider Usage\n\nClaude Code:\n   5h: 45% (resets in 2h 15m)\n   7d: 12% (resets in 5d 3h)\n\nOpenAI Codex (plus):\n   5h: 30% (resets in 1h 45m)\n   7d: 8% (resets in 6d 12h)\n\nGemini (gemini-2.0-flash):\n   Usage: 25% (resets in 4h)\n```\n\n## Implementation\n1. Call fetchAllUsage() at start of handler\n2. Format each provider's usage with percentage and reset time\n3. Skip providers that return null (not installed/authenticated)\n4. Show loading indicator or cache status","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:31:48.508641909+09:00","created_by":"Z","updated_at":"2026-02-02T01:35:16.194224801+09:00","closed_at":"2026-02-02T01:35:16.194224801+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agi-a1s","depends_on_id":"agi-e5r","type":"blocks","created_at":"2026-02-02T01:31:59.801718889+09:00","created_by":"Z"}]}
{"id":"agi-cnf","title":"Port to Rust","description":"Plan and execute a full port of the TypeScript Telegram bot to Rust, including architecture, feature parity, and deployment.","status":"open","priority":2,"issue_type":"epic","owner":"z@2lab.ai","created_at":"2026-02-02T01:52:10.21969328+09:00","created_by":"Z","updated_at":"2026-02-02T01:52:10.21969328+09:00"}
{"id":"agi-e5r","title":"Create multi-provider usage utility module (src/usage.ts)","description":"Create a new module to fetch usage statistics from Claude Code, OpenAI Codex, and Gemini CLI.\n\n## Source Reference\nBased on https://github.com/zhugehyuk-contributions/claude-dashboard code patterns.\n\n## Implementation Details\n\n### Claude Code Usage (api-client.ts pattern)\n- API: GET https://api.anthropic.com/api/oauth/usage\n- Auth: Bearer token from ~/.claude/.credentials.json or macOS Keychain\n- Response: five_hour, seven_day, seven_day_sonnet (utilization %, reset time)\n\n### OpenAI Codex Usage (codex-client.ts pattern)\n- API: GET https://chatgpt.com/backend-api/wham/usage\n- Auth: Bearer token + account ID from ~/.codex/auth.json\n- Response: primary_window (5h), secondary_window (7d) with used_percent, reset times\n\n### Gemini Usage (gemini-client.ts pattern)\n- API: POST https://cloudcode-pa.googleapis.com/v1internal:retrieveUserQuota\n- Auth: OAuth token from macOS Keychain or ~/.gemini/oauth_creds.json\n- Response: buckets with remainingFraction, resetTime per model\n\n## Functions to implement\n- fetchClaudeUsage(): Promise\u003cClaudeUsage | null\u003e\n- fetchCodexUsage(): Promise\u003cCodexUsage | null\u003e\n- fetchGeminiUsage(): Promise\u003cGeminiUsage | null\u003e\n- fetchAllUsage(): Promise\u003cAllUsage\u003e (parallel fetch all)\n\n## Caching\n- In-memory cache with configurable TTL (default 60s)\n- Deduplicate concurrent requests","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:31:30.564745923+09:00","created_by":"Z","updated_at":"2026-02-02T01:33:29.393259141+09:00","closed_at":"2026-02-02T01:33:29.393259141+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agi-e5r","depends_on_id":"agi-ix4","type":"blocks","created_at":"2026-02-02T01:31:59.776456518+09:00","created_by":"Z"}]}
{"id":"agi-ey6","title":"Add preflight service check before restart in make up","description":"Improve make up reliability with preflight checks before service restart\n\nCurrent: make up â†’ install â†’ build â†’ restart service\nProblem: If build fails, service is already stopped/restarted\n\nGoal: make up â†’ install â†’ build â†’ preflight check â†’ restart if OK\n\nImplementation:\n1. Add preflight target to Makefile\n2. Preflight checks:\n   - bun run typecheck passes\n   - No critical lint errors\n   - Service configuration valid\n3. Only restart service if all preflight checks pass\n4. Show clear error messages if preflight fails\n\nBenefits:\n- Prevents broken deployments\n- Service stays running if new code is broken\n- Clear feedback on what failed","status":"open","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:41:27.927075357+09:00","created_by":"Z","updated_at":"2026-02-02T01:41:44.675602588+09:00"}
{"id":"agi-gi2","title":"Research: Claude Code context window usage \u0026 subscription weekly usage API","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:15:06.917549891+09:00","created_by":"Z","updated_at":"2026-02-02T01:19:17.485455809+09:00","closed_at":"2026-02-02T01:19:17.485455809+09:00","close_reason":"Closed"}
{"id":"agi-ix4","title":"Add usage types to src/types.ts","description":"Add TypeScript types for multi-provider usage data.\n\n## Types to add\n\n```typescript\n// Claude usage from oauth/usage endpoint\ninterface ClaudeUsage {\n  five_hour: { utilization: number; resets_at: string | null } | null;\n  seven_day: { utilization: number; resets_at: string | null } | null;\n  seven_day_sonnet: { utilization: number; resets_at: string | null } | null;\n}\n\n// Codex usage from ChatGPT backend\ninterface CodexUsage {\n  model: string;\n  planType: string;\n  primary: { usedPercent: number; resetAt: number } | null;\n  secondary: { usedPercent: number; resetAt: number } | null;\n}\n\n// Gemini usage from Code Assist API\ninterface GeminiUsage {\n  model: string;\n  usedPercent: number | null;\n  resetAt: string | null;\n}\n\n// Combined usage result\ninterface AllUsage {\n  claude: ClaudeUsage | null;\n  codex: CodexUsage | null;\n  gemini: GeminiUsage | null;\n  fetchedAt: number;\n}\n```","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:31:39.407631055+09:00","created_by":"Z","updated_at":"2026-02-02T01:32:33.226229237+09:00","closed_at":"2026-02-02T01:32:33.226229237+09:00","close_reason":"Closed"}
{"id":"agi-p62","title":"cron job queue system","description":"Implement cron job queue system to prevent jobs from being skipped when session is busy.\n\nCurrently: Cron jobs are skipped if session.isRunning\nGoal: Queue pending cron jobs and execute them when session becomes idle\n\nTasks:\n- [ ] Add pendingCronJobs queue to scheduler.ts (Array\u003c{schedule, timestamp}\u003e)\n- [ ] Modify executeScheduledPrompt: push to queue if session busy\n- [ ] Add processQueuedJobs() function to execute queued jobs\n- [ ] Hook into session completion to call processQueuedJobs()\n- [ ] Add queue status to /cron command output\n- [ ] Test: schedule job while session busy, verify it executes after","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T00:58:04.48459361+09:00","created_by":"Z","updated_at":"2026-02-02T01:09:23.480881355+09:00","closed_at":"2026-02-02T01:09:23.480881355+09:00","close_reason":"Closed"}
{"id":"agi-uey","title":"Fix make up to include service restart","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T00:15:12.002555983+09:00","created_by":"Z","updated_at":"2026-02-02T01:03:23.064613675+09:00","closed_at":"2026-02-02T00:20:06.929627814+09:00","close_reason":"Closed"}
{"id":"agi-vv1","title":"Real-time steering: inject user messages during Claude execution","description":"## ê¸°ëŠ¥\nì‚¬ìš©ìê°€ Claude ì‹¤í–‰ ì¤‘ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ í–‰ë™ì„ steering\n\n## ì¡°ì‚¬ ê²°ê³¼\n\n### SDK ì§€ì›\n- V1 API: `interrupt()` ë©”ì„œë“œ + AsyncGenerator íŒ¨í„´\n- V2 API: `streamInput()` ìˆìœ¼ë‚˜ unstable\n- Hooks API: `PreToolUse` hookìœ¼ë¡œ ì»¨í…ìŠ¤íŠ¸ ì£¼ì… ê°€ëŠ¥\n\n### ê¶Œì¥ ì•„í‚¤í…ì²˜: Hook Injection + Interrupt\n```\nì¼ë°˜ ë©”ì‹œì§€ (ì‹¤í–‰ ì¤‘) â†’ ë²„í¼ì— ì¶”ê°€ â†’ ë‹¤ìŒ tool í˜¸ì¶œ ì „ ì£¼ì…\n! prefix â†’ ê¸°ì¡´ì²˜ëŸ¼ abort + ìƒˆ ì¿¼ë¦¬\n!! prefix â†’ hard interrupt (ì¦‰ì‹œ ì¤‘ë‹¨)\n```\n\n### êµ¬í˜„ ë°©ë²•\n1. SteeringBuffer í´ë˜ìŠ¤ ìƒì„±\n2. PreToolUse hookì—ì„œ ë²„í¼ëœ ë©”ì‹œì§€ë¥¼ additionalContextë¡œ ì£¼ì…\n3. ê¸°ì¡´ ! interrupt ìœ ì§€\n\n### ì°¸ê³ \n- GitHub Issue #70: Real-time steering (closed/completed)\n- GitHub Issue #120: V2 interrupt (open)\n- Tool use ì¤‘ interrupt ì‹œ ì—ëŸ¬ ê°€ëŠ¥ì„± ìˆìŒ (Issue #12162)","status":"open","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:10:15.867941209+09:00","created_by":"Z","updated_at":"2026-02-02T01:10:15.867941209+09:00"}
{"id":"agi-wdq","title":"message reaction indicators for turn tracking","description":"Add message reactions to indicate conversation turn status.\n\nProblem: User can't tell when Claude has received and is processing their message, or when Claude's turn is complete.\n\nSolution:\n1. When user message received â†’ Add reaction (ğŸ‘€ or â³) to user's message\n2. When Claude finishes turn â†’ Add reaction (âœ…) to Claude's last message\n\nImplementation:\n- Use Telegram setMessageReaction API\n- Add reaction to user message in message handlers\n- Add reaction to bot's last message when turn complete","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T00:59:57.144000709+09:00","created_by":"Z","updated_at":"2026-02-02T01:06:17.441973632+09:00","closed_at":"2026-02-02T01:06:17.441973632+09:00","close_reason":"Closed"}
{"id":"agi-xd7","title":"make up with context message for restart continuity","description":"Feature: Accept context message in make up command\n\nUsage:\nmake up \"current context and next tasks\"\n\nWorkflow:\n1. Before restart: Use oh-my-claude:save skill to save context\n2. Run make up to restart bot\n3. After restart: Auto-load saved context using oh-my-claude:load skill\n\nImplementation:\n- Modify Makefile to accept optional message parameter\n- Save message to docs/tasks/save/ before restart\n- On startup, check for saved context file\n- Notify user to use /load skill or auto-load\n\nGoal: Preserve conversation context across bot restarts","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:27:14.707652686+09:00","created_by":"Z","updated_at":"2026-02-02T01:36:53.259037784+09:00","closed_at":"2026-02-02T01:36:53.259037784+09:00","close_reason":"Closed"}
{"id":"agi-y86","title":"Progress spinner for work status","description":"ì‘ì—… ì§„í–‰ì¤‘ ë©”ì‹œì§€ í•˜ë‹¨ì— ìŠ¤í”¼ë„ˆ í‘œì‹œ:\n1. í˜„ì¬ ì‘ì—… ì§„í–‰ ìƒíƒœë¥¼ ë§¨ ë§ˆì§€ë§‰ ë©”ì‹œì§€ë¡œ í‘œì‹œ\n2. ì‹œê°„ í‘œì‹œ ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸\n3. ì‘ì—… ì™„ë£Œì‹œ: ì‹œì‘ì‹œê°„, ì¢…ë£Œì‹œê°„, ì†Œìš”ì‹œê°„(ë¶„:ì´ˆ) í‘œì‹œ\n4. êµ¬í˜„ í›„ make upìœ¼ë¡œ ì¬ì‹œì‘ê¹Œì§€ ì™„ë£Œ","status":"closed","priority":2,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:04:17.150770594+09:00","created_by":"Z","updated_at":"2026-02-02T01:13:13.891376626+09:00","closed_at":"2026-02-02T01:13:13.891376626+09:00","close_reason":"Closed"}
{"id":"agi-zpw","title":"Fix: Progress timer race condition in streaming.ts","description":"Race condition: Timer may edit deleted progress message\n\nLocation: src/handlers/streaming.ts:158-177\n\nIssue: state.progressMessage can be mutated by recreateProgressMessage() while timer's async editMessageText is pending. Timer may hold stale reference.\n\nImpact: Intermittent 'message not found' errors from Telegram API\n\nFix: Capture message reference at start of timer callback and verify hasn't changed","status":"open","priority":1,"issue_type":"task","owner":"z@2lab.ai","created_at":"2026-02-02T01:47:55.928136054+09:00","created_by":"Z","updated_at":"2026-02-02T01:48:08.410845371+09:00"}
